(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{68:function(e,t,c){},69:function(e,t,c){"use strict";c.r(t);var n=c(7),a=c(37),r=c.n(a),s=c(0),i=c.n(s),o=c(1),u=c(11),d=c(28),j=c(12),b=c(26),l=c(17),h=c(38),O=c(39),f=c(33),p=c(35),m=(Object(O.a)({apiKey:"AIzaSyCoCpg0Qyzhsduy8lFJhxr2W0m_D3Sheck",authDomain:"proyecto-weather-56f8b.firebaseapp.com",projectId:"proyecto-weather-56f8b",storageBucket:"proyecto-weather-56f8b.appspot.com",messagingSenderId:"76962852029",appId:"1:76962852029:web:50be6387f24177d3449bd4"}),Object(f.b)()),x=Object(p.b)(),v=Object(f.a)(m,"historial"),g=Object(f.a)(m,"tarjetas"),w=new p.a,N=c(8),y=Object(n.createContext)(),C=function(e){var t=e.children,c=Object(n.useState)(x.currentUser),a=Object(u.a)(c,2),r=a[0],s=a[1];return Object(N.jsx)(y.Provider,{value:{user:r,setUser:s},children:t})},k=function(){return Object(n.useContext)(y)},S=function(e){var t=e.desloguear,c=Object(j.f)();return Object(N.jsxs)("nav",{className:"nav_home",children:[Object(N.jsxs)("div",{children:[Object(N.jsx)(d.b,{to:"/search",children:"Inicio"}),Object(N.jsx)(d.b,{to:"/history",children:"History"})]}),Object(N.jsx)("div",{children:Object(N.jsx)("button",{type:"button",onClick:function(){t(),c("/")},className:"cerrar_sesion",children:"Cerrar Sesion"})})]})},D=c(15),_=function(e){var t=e.setCiudades,c=e.setHistorial,a=Object(n.useState)(""),r=Object(u.a)(a,2),s=r[0],i=r[1];return Object(N.jsx)("div",{children:Object(N.jsx)("form",{className:"div_input",onSubmit:function(e){var n=s.split(",").map((function(e){return{nombre:e,fecha:new Date}}));e.preventDefault(),t((function(e){return[].concat(Object(D.a)(n),Object(D.a)(e))})),c((function(e){return[].concat(Object(D.a)(n),Object(D.a)(e)).slice(0,10)})),i("")},children:Object(N.jsx)("input",{className:"input_search",type:"text",placeholder:"Ingrese una ciudad",value:s,onChange:function(e){return i(e.target.value)},required:!0})})})},I=function(){var e=Object(o.a)(i.a.mark((function e(t){var c,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"es",c="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&lang=").concat("es","&appid=f639681261a87e68583de41ee2875356&units=metric"),e.next=4,fetch(c);case 4:if(0!=(n=e.sent).ok){e.next=8;break}e.next=12;break;case 8:return e.next=10,n.json();case 10:return a=e.sent,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=c(40),E=c.n(A),H=function(e){var t=e.ciudad,c=e.id,a=e.borrarCiudad,r=Object(n.useState)(),s=Object(u.a)(r,2),d=s[0],j=s[1];Object(n.useEffect)(Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:void 0==(n=e.sent)?(Object(l.c)(Object(l.d)(m,"tarjetas",c)),!alert("INTRODUZCA UNA CIUDAD V\xc1LIDA")&&location.reload()):j(n);case 4:case"end":return e.stop()}}),e)}))),[]);return d?Object(N.jsxs)("div",{className:"cards",children:[Object(N.jsxs)("div",{className:"card_image",children:[Object(N.jsx)("img",{className:"clouds",src:"http://openweathermap.org/img/wn/".concat(d.weather[0].icon,"@2x.png"),alt:"cloud",border:"0"}),Object(N.jsx)("h2",{children:d.name}),Object(N.jsx)("p",{children:d.weather[0].description}),Object(N.jsxs)("p",{className:"bold",children:[d.main.temp,"\xba"]})]}),Object(N.jsxs)("div",{className:"card_down",children:[Object(N.jsxs)("p",{children:["Temp maxima: ",Object(N.jsxs)("span",{className:"bold",children:[d.main.temp_max,"\xba"]})]}),Object(N.jsxs)("p",{children:["Temp minima: ",Object(N.jsxs)("span",{className:"bold",children:[d.main.temp_min,"\xba"]})]}),Object(N.jsxs)("p",{children:["Sensasion Termica:"," ",Object(N.jsxs)("span",{className:"bold",children:[d.main.feels_like,"\xba"]})]}),Object(N.jsx)("button",{className:"borrar",onClick:function(){Object(l.c)(Object(l.d)(m,"tarjetas",c)),a(c)},children:"Borrar"})]})]}):Object(N.jsx)("div",{className:"card_loader",children:Object(N.jsx)(E.a,{type:"TailSpin",color:"white",height:100,width:100})})},U=function(e){var t=e.desloguear,c=e.ciudades,a=e.setCiudades,r=e.setHistorial,s=e.subirDatos,d=k().user,j=Object(n.useState)([]),O=Object(u.a)(j,2),f=O[0],p=O[1],m=Object(l.e)(Object(l.g)(g,Object(l.h)("uid","==",d.uid))).then((function(e){var t=[];return e.docs.forEach((function(e){t.push(Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id}))})),t})),x=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();f.sort((function(e,t){if(e.orden>t.orden)return-1})),Object(h.useEffect)((function(){x()}),[c]);var v=function(e){p(f.filter((function(t){return t.id!=e})))};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(S,{desloguear:t}),Object(N.jsx)(_,{setCiudades:a,setHistorial:r,subirDatos:s}),Object(N.jsx)("div",{className:"cards_content",children:f.map((function(e){return Object(N.jsx)(H,{ciudad:e.ciudad,id:e.id,borrarCiudad:v},e.id)}))})]})},F=function(e){var t=e.ciudad,c=(e.id,e.fecha),n=e.anio,a=e.dia,r=e.hora,s=e.mes,i=e.minutos,o=e.segundos;e.uid;return Object(N.jsxs)("div",{className:"historys",children:[Object(N.jsx)("p",{className:"bold",children:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1).toLowerCase())}),Object(N.jsx)("p",{children:"".concat(a,", ").concat(c," de ").concat(s," ").concat(n," (").concat(r,":").concat(i,":").concat(o,").")})]})},J=function(e){var t=e.desloguear,c=k().user,a=Object(n.useState)([]),r=Object(u.a)(a,2),s=r[0],d=r[1],j=Object(l.e)(Object(l.g)(v,Object(l.h)("uid","==",c.uid))).then((function(e){var t=[];return e.docs.forEach((function(e){t.push(Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id}))})),t})),h=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j;case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.sort((function(e,t){if(e.orden>t.orden)return-1})),Object(n.useEffect)((function(){h()}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(S,{desloguear:t}),Object(N.jsx)("div",{className:"history_content",children:s.slice(0,10).map((function(e){return Object(N.jsx)(F,{ciudad:e.ciudad,fecha:e.fecha,anio:e.anio,dia:e.dia,hora:e.hora,mes:e.mes,minutos:e.minutos,segundos:e.segundos,uid:e.uid},e.id)}))})]})},M=function(e){var t=e.loguear;return Object(N.jsx)("div",{className:"login_content",children:Object(N.jsxs)("div",{className:"form-login",children:[Object(N.jsx)("h1",{children:"Log in"}),Object(N.jsxs)("div",{className:"google-btn",onClick:t,children:[Object(N.jsx)("div",{className:"google-icon-wrapper",children:Object(N.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(N.jsx)("div",{className:"text-content",children:Object(N.jsx)("b",{children:"Sign in with google"})})]})]})})},L=c(29),T=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.c)(x,w).then((function(e){return e.user})).catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.signOut().then().catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(n.useContext)(y),t=e.user,c=e.setUser,a=Object(n.useState)([]),r=Object(u.a)(a,2),s=r[0],b=r[1],h=Object(n.useState)([]),O=Object(u.a)(h,2),f=O[0],p=O[1],m=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){z();c(null)};Object(n.useEffect)((function(){x.onAuthStateChanged((function(e){(null===e||void 0===e?void 0:e.uid)&&c(e)}))}),[]);var C=function(){var e=f[0].fecha.getFullYear(),c=f[0].fecha.getDate(),n=f[0].fecha.getDay(),a=f[0].fecha.getMonth();0==a&&(a="Enero"),1==a&&(a="Febrero"),2==a&&(a="Marzo"),3==a&&(a="Abril"),4==a&&(a="Mayo"),5==a&&(a="Junio"),6==a&&(a="Julio"),7==a&&(a="Agosto"),8==a&&(a="Septiembre"),9==a&&(a="Octubre"),10==a&&(a="Noviembre"),11==a&&(a="Diciembre"),0==n&&(n="Domingo"),1==n&&(n="Lunes"),2==n&&(n="Martes"),3==n&&(n="Miercoles"),4==n&&(n="Jueves"),5==n&&(n="Viernes"),6==n&&(n="Sabado");var r=f[0].fecha.getHours();r<=9&&(r="0".concat(r));var s=f[0].fecha.getMinutes();s<=9&&(s="0".concat(s));var i=f[0].fecha.getSeconds();i<=9&&(i="0".concat(i));var o=f[0].nombre.trim(),u={orden:Date.now(),ciudad:o,dia:n,fecha:c,mes:a,anio:e,hora:r,minutos:s,segundos:i,uid:(null===t||void 0===t?void 0:t.uid)?t.uid:"cargando"};Object(l.a)(v,u)};return Object(n.useEffect)((function(){0!=f.length&&(C(),0!=s.length&&function(){var e={ciudad:s[0].nombre,uid:(null===t||void 0===t?void 0:t.uid)?t.uid:"cargando",orden:Date.now()};Object(l.a)(g,e)}())}),[f,s]),Object(N.jsx)(d.a,{children:Object(N.jsx)("div",{children:Object(N.jsxs)(j.c,{children:[t&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(j.a,{path:"/history",element:Object(N.jsx)(J,{desloguear:w,historial:f})}),Object(N.jsx)(j.a,{path:"/search",element:Object(N.jsx)(U,{desloguear:w,ciudades:s,setCiudades:b,setHistorial:p,subirDatos:C})})]}),Object(N.jsx)(j.a,{path:"/",element:t?Object(N.jsx)(U,{desloguear:w,ciudades:s,setHistorial:p,setCiudades:b,subirDatos:C}):Object(N.jsx)(M,{loguear:m}),exact:!0})]})})})};c(68);r.a.render(Object(N.jsx)(C,{children:Object(N.jsx)(B,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.f5df4b07.chunk.js.map