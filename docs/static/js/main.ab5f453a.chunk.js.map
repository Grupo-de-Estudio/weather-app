{"version":3,"sources":["firebase/config.jsx","context/authContext.js","pages/components/Navbar.jsx","pages/components/Searchbar.jsx","api/weather.js","pages/components/SingleCard.jsx","pages/SearchScreen.jsx","pages/components/SearchHistory.jsx","pages/HistoryScreen.jsx","pages/LoginScreen.jsx","actions/auth.jsx","WeatherApp.js","index.js"],"names":["db","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","getFirestore","auth","getAuth","colRef","collection","tarjetas","googleAuthProvider","GoogleAuthProvider","Context","createContext","ContextProvider","children","useState","currentUser","user","setUser","Provider","value","useUserContext","useContext","Navbar","desloguear","navigate","useNavigate","className","to","type","onClick","Searchbar","setCiudades","setHistorial","input","setInput","onSubmit","e","busquedas","split","map","city","nombre","fecha","Date","preventDefault","prev","slice","placeholder","onChange","target","required","fetchCityWeather","ciudad","a","url","fetch","resp","ok","json","dataWeather","SingleCard","id","borrarCiudad","data","setData","useEffect","undefined","resData","deleteDoc","doc","alert","location","reload","src","weather","icon","alt","border","name","description","main","temp","temp_max","temp_min","feels_like","color","height","width","SearchScreen","ciudades","subirDatos","bajarTarjetas","setBajarTarjetas","bajarDatos","getDocs","query","where","uid","then","snapshot","datos","docs","forEach","push","cargarDatosBajados","sort","b","orden","filter","SearchHistory","anio","dia","hora","mes","minutos","segundos","charAt","toUpperCase","toLowerCase","HistoryScreen","bajados","setBajados","LoginScreen","loguear","googleLogin","signInWithPopup","result","catch","error","logout","signOut","WeatherApp","historial","res","onAuthStateChanged","getFullYear","diaNumero","getDate","diaSemana","getDay","getMonth","getHours","getMinutes","getSeconds","trim","cargarHistorial","now","addDoc","length","nombreTarjeta","subirTarjeta","path","element","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ab5f453a.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app'\r\nimport { getFirestore, collection } from 'firebase/firestore'\r\nimport { GoogleAuthProvider, getAuth } from 'firebase/auth'\r\n\r\nconst firebaseConfig = {\r\n  apiKey: 'AIzaSyCoCpg0Qyzhsduy8lFJhxr2W0m_D3Sheck',\r\n  authDomain: 'proyecto-weather-56f8b.firebaseapp.com',\r\n  projectId: 'proyecto-weather-56f8b',\r\n  storageBucket: 'proyecto-weather-56f8b.appspot.com',\r\n  messagingSenderId: '76962852029',\r\n  appId: '1:76962852029:web:50be6387f24177d3449bd4',\r\n}\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig)\r\nconst db = getFirestore()\r\nconst auth = getAuth()\r\nconst colRef = collection(db, 'historial')\r\nconst tarjetas = collection(db, 'tarjetas')\r\n\r\nconst googleAuthProvider = new GoogleAuthProvider()\r\n\r\nexport { db, googleAuthProvider, app, auth, colRef, tarjetas }\r\n","import { createContext, useContext, useState } from 'react'\r\nimport { auth } from '../firebase/config'\r\n\r\nexport const Context = createContext()\r\n\r\nexport const ContextProvider = ({ children }) => {\r\n  const [user, setUser] = useState(auth.currentUser)\r\n\r\n  return (\r\n    <Context.Provider value={{ user, setUser }}>{children}</Context.Provider>\r\n  )\r\n}\r\n\r\nexport const useUserContext = () => {\r\n  const userContext = useContext(Context)\r\n  return userContext\r\n}\r\n","import React from 'react'\r\nimport { NavLink, useNavigate } from 'react-router-dom'\r\n\r\nexport const Navbar = ({ desloguear }) => {\r\n  const navigate = useNavigate()\r\n  const cerrarSesion = () => {\r\n    desloguear()\r\n    navigate('/')\r\n  }\r\n  return (\r\n    <nav className=\"nav_home\">\r\n      <div>\r\n        <NavLink to=\"/search\">Inicio</NavLink>\r\n\r\n        <NavLink to=\"/history\">History</NavLink>\r\n      </div>\r\n      <div>\r\n        <button type=\"button\" onClick={cerrarSesion} className=\"cerrar_sesion\">\r\n          Cerrar Sesion\r\n        </button>\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nexport const Searchbar = ({ setCiudades, setHistorial }) => {\r\n  const [input, setInput] = useState('')\r\n\r\n  return (\r\n    <div>\r\n      <form\r\n        className=\"div_input\"\r\n        onSubmit={(e) => {\r\n          const busquedas = input\r\n            .split(',')\r\n            .map((city) => ({ nombre: city, fecha: new Date() }))\r\n          e.preventDefault()\r\n          setCiudades((prev) => [...busquedas, ...prev])\r\n          setHistorial((prev) => [...busquedas, ...prev].slice(0, 10))\r\n          setInput('')\r\n        }}\r\n      >\r\n        <input\r\n          className=\"input_search\"\r\n          type=\"text\"\r\n          placeholder=\"Ingrese una ciudad\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          required\r\n        />\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","export const fetchCityWeather = async (ciudad) => {\r\n  const lang = 'es'\r\n  const url = `https://api.openweathermap.org/data/2.5/weather?q=${ciudad}&lang=${lang}&appid=f639681261a87e68583de41ee2875356&units=metric`\r\n  const resp = await fetch(url)\r\n  if (resp.ok == false) {\r\n  } else {\r\n    const dataWeather = await resp.json()\r\n    return dataWeather\r\n  }\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { fetchCityWeather } from '../../api/weather'\r\nimport Loader from 'react-loader-spinner'\r\nimport { deleteDoc, doc } from '@firebase/firestore'\r\nimport { db } from '../../firebase/config'\r\n\r\nexport const SingleCard = ({ ciudad, id, borrarCiudad }) => {\r\n  const [data, setData] = useState()\r\n\r\n  useEffect(async () => {\r\n    const resData = await fetchCityWeather(ciudad)\r\n    if (resData == undefined) {\r\n      deleteDoc(doc(db, 'tarjetas', id))\r\n      alert('INTRODUZCA UNA CIUDAD VÁLIDA') ? '' : location.reload()\r\n    } else {\r\n      setData(resData)\r\n    }\r\n  }, [])\r\n\r\n  const borrarCiudadFirebase = () => {\r\n    deleteDoc(doc(db, 'tarjetas', id))\r\n  }\r\n\r\n  if (!data)\r\n    return (\r\n      <div className=\"card_loader\">\r\n        <Loader type=\"TailSpin\" color=\"white\" height={100} width={100} />\r\n      </div>\r\n    )\r\n  return (\r\n    <div className=\"cards\">\r\n      <div className=\"card_image\">\r\n        <img\r\n          className=\"clouds\"\r\n          src={`http://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`}\r\n          alt=\"cloud\"\r\n          border=\"0\"\r\n        />\r\n        <h2>{data.name}</h2>\r\n        <p>{data.weather[0].description}</p>\r\n        <p className=\"bold\">{data.main.temp}º</p>\r\n      </div>\r\n      <div className=\"card_down\">\r\n        <p>\r\n          Temp maxima: <span className=\"bold\">{data.main.temp_max}º</span>\r\n        </p>\r\n        <p>\r\n          Temp minima: <span className=\"bold\">{data.main.temp_min}º</span>\r\n        </p>\r\n        <p>\r\n          Sensasion Termica:{' '}\r\n          <span className=\"bold\">{data.main.feels_like}º</span>\r\n        </p>\r\n        <button\r\n          className=\"borrar\"\r\n          onClick={() => {\r\n            borrarCiudadFirebase()\r\n            borrarCiudad(id)\r\n          }}\r\n        >\r\n          Borrar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { getDocs, query, where } from '@firebase/firestore'\r\nimport React, { useState } from 'react'\r\nimport { useEffect } from 'react/cjs/react.development'\r\nimport { useUserContext } from '../context/authContext'\r\nimport { tarjetas } from '../firebase/config'\r\nimport { Navbar } from './components/Navbar'\r\nimport { Searchbar } from './components/Searchbar'\r\nimport { SingleCard } from './components/SingleCard'\r\n\r\nexport const SearchScreen = ({\r\n  desloguear,\r\n  ciudades,\r\n  setCiudades,\r\n  setHistorial,\r\n  subirDatos,\r\n}) => {\r\n  const { user } = useUserContext()\r\n  const [bajarTarjetas, setBajarTarjetas] = useState([])\r\n\r\n  const bajarDatos = getDocs(\r\n    query(tarjetas, where('uid', '==', user.uid))\r\n  ).then((snapshot) => {\r\n    let datos = []\r\n    snapshot.docs.forEach((doc) => {\r\n      datos.push({ ...doc.data(), id: doc.id })\r\n    })\r\n    return datos\r\n  })\r\n\r\n  const cargarDatosBajados = async () => {\r\n    const datos = await bajarDatos\r\n    setBajarTarjetas(datos)\r\n  }\r\n\r\n  bajarTarjetas.sort((a, b) => {\r\n    if (a.orden > b.orden) {\r\n      return -1\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    cargarDatosBajados()\r\n  }, [ciudades])\r\n\r\n  const borrarCiudad = (id) => {\r\n    setBajarTarjetas(bajarTarjetas.filter((ciudad) => ciudad.id != id))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navbar desloguear={desloguear} />\r\n      <Searchbar\r\n        setCiudades={setCiudades}\r\n        setHistorial={setHistorial}\r\n        subirDatos={subirDatos}\r\n      />\r\n      <div className=\"cards_content\">\r\n        {bajarTarjetas.map((city) => (\r\n          <SingleCard\r\n            key={city.id}\r\n            ciudad={city.ciudad}\r\n            id={city.id}\r\n            borrarCiudad={borrarCiudad}\r\n          />\r\n        ))}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport const SearchHistory = ({\r\n  ciudad,\r\n  id,\r\n  fecha,\r\n  anio,\r\n  dia,\r\n  hora,\r\n  mes,\r\n  minutos,\r\n  segundos,\r\n  uid,\r\n}) => {\r\n  return (\r\n    <div className=\"historys\">\r\n      <p className=\"bold\">{`${ciudad.charAt(0).toUpperCase()}${ciudad\r\n        .slice(1)\r\n        .toLowerCase()}`}</p>\r\n      <p>{`${dia}, ${fecha} de ${mes} ${anio} (${hora}:${minutos}:${segundos}).`}</p>\r\n    </div>\r\n  )\r\n}\r\n","import { getDocs, query, where } from '@firebase/firestore'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useUserContext } from '../context/authContext'\r\nimport { colRef } from '../firebase/config'\r\nimport { Navbar } from './components/Navbar'\r\nimport { SearchHistory } from './components/SearchHistory'\r\n\r\nexport const HistoryScreen = ({ desloguear }) => {\r\n  const { user } = useUserContext()\r\n  const [bajados, setBajados] = useState([])\r\n\r\n  const bajarDatos = getDocs(query(colRef, where('uid', '==', user.uid))).then(\r\n    (snapshot) => {\r\n      let datos = []\r\n      snapshot.docs.forEach((doc) => {\r\n        datos.push({ ...doc.data(), id: doc.id })\r\n      })\r\n      return datos\r\n    }\r\n  )\r\n\r\n  const cargarDatosBajados = async () => {\r\n    const datos = await bajarDatos\r\n    setBajados(datos)\r\n  }\r\n\r\n  bajados.sort((a, b) => {\r\n    if (a.orden > b.orden) {\r\n      return -1\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    cargarDatosBajados()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <Navbar desloguear={desloguear} />\r\n      <div className=\"history_content\">\r\n        {bajados.slice(0, 10).map((ciudad) => (\r\n          <SearchHistory\r\n            ciudad={ciudad.ciudad}\r\n            key={ciudad.id}\r\n            fecha={ciudad.fecha}\r\n            anio={ciudad.anio}\r\n            dia={ciudad.dia}\r\n            hora={ciudad.hora}\r\n            mes={ciudad.mes}\r\n            minutos={ciudad.minutos}\r\n            segundos={ciudad.segundos}\r\n            uid={ciudad.uid}\r\n          />\r\n        ))}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport const LoginScreen = ({ loguear }) => {\r\n  return (\r\n    <div className=\"login_content\">\r\n      <div className=\"form-login\">\r\n        <h1>Log in</h1>\r\n\r\n        <div className=\"google-btn\" onClick={loguear}>\r\n          <div className=\"google-icon-wrapper\">\r\n            <img\r\n              className=\"google-icon\"\r\n              src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\"\r\n              alt=\"google button\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"text-content\">\r\n            <b>Sign in with google</b>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { signInWithPopup } from '@firebase/auth'\r\nimport { googleAuthProvider, auth } from '../firebase/config'\r\n\r\nexport const googleLogin = async () => {\r\n  return await signInWithPopup(auth, googleAuthProvider)\r\n    .then((result) => {\r\n      return result.user\r\n    })\r\n    .catch((error) => {})\r\n}\r\nexport const logout = async () => {\r\n  return await auth\r\n    .signOut()\r\n    .then()\r\n    .catch((error) => {})\r\n}\r\n","import React, { useState, useContext, useEffect } from 'react'\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom'\r\nimport { SearchScreen } from './pages/SearchScreen'\r\nimport { HistoryScreen } from './pages/HistoryScreen'\r\nimport { LoginScreen } from './pages/LoginScreen'\r\nimport { googleLogin, logout } from './actions/auth'\r\nimport { Context } from './context/authContext'\r\nimport { auth, colRef, tarjetas } from './firebase/config'\r\nimport { addDoc } from '@firebase/firestore'\r\n\r\nexport const WeatherApp = () => {\r\n  const { user, setUser } = useContext(Context)\r\n  const [ciudades, setCiudades] = useState([])\r\n  const [historial, setHistorial] = useState([])\r\n\r\n  const loguear = async () => {\r\n    const res = await googleLogin()\r\n    setUser(res)\r\n  }\r\n\r\n  const desloguear = () => {\r\n    const res = logout()\r\n    setUser(null)\r\n  }\r\n\r\n  // Mantener el estado de la autenticacion al hacer refresh\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user?.uid) {\r\n        setUser(user)\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  // Subir datos del historial a firebase\r\n\r\n  const subirDatos = () => {\r\n    let anio = historial[0].fecha.getFullYear()\r\n    let diaNumero = historial[0].fecha.getDate()\r\n    let diaSemana = historial[0].fecha.getDay()\r\n    let mes = historial[0].fecha.getMonth()\r\n\r\n    if (mes == 0) mes = 'Enero'\r\n    if (mes == 1) mes = 'Febrero'\r\n    if (mes == 2) mes = 'Marzo'\r\n    if (mes == 3) mes = 'Abril'\r\n    if (mes == 4) mes = 'Mayo'\r\n    if (mes == 5) mes = 'Junio'\r\n    if (mes == 6) mes = 'Julio'\r\n    if (mes == 7) mes = 'Agosto'\r\n    if (mes == 8) mes = 'Septiembre'\r\n    if (mes == 9) mes = 'Octubre'\r\n    if (mes == 10) mes = 'Noviembre'\r\n    if (mes == 11) mes = 'Diciembre'\r\n\r\n    if (diaSemana == 0) diaSemana = 'Domingo'\r\n    if (diaSemana == 1) diaSemana = 'Lunes'\r\n    if (diaSemana == 2) diaSemana = 'Martes'\r\n    if (diaSemana == 3) diaSemana = 'Miercoles'\r\n    if (diaSemana == 4) diaSemana = 'Jueves'\r\n    if (diaSemana == 5) diaSemana = 'Viernes'\r\n    if (diaSemana == 6) diaSemana = 'Sabado'\r\n\r\n    let hora = historial[0].fecha.getHours()\r\n    if (hora <= 9) hora = `0${hora}`\r\n\r\n    let minutos = historial[0].fecha.getMinutes()\r\n    if (minutos <= 9) minutos = `0${minutos}`\r\n\r\n    let segundos = historial[0].fecha.getSeconds()\r\n    if (segundos <= 9) segundos = `0${segundos}`\r\n\r\n    let ciudad = historial[0].nombre.trim()\r\n\r\n    const cargarHistorial = {\r\n      orden: Date.now(),\r\n      ciudad: ciudad,\r\n      dia: diaSemana,\r\n      fecha: diaNumero,\r\n      mes: mes,\r\n      anio: anio,\r\n      hora: hora,\r\n      minutos: minutos,\r\n      segundos: segundos,\r\n      uid: user?.uid ? user.uid : 'cargando',\r\n    }\r\n\r\n    addDoc(colRef, cargarHistorial)\r\n  }\r\n\r\n  const subirTarjeta = () => {\r\n    const nombreTarjeta = {\r\n      ciudad: ciudades[0].nombre,\r\n      uid: user?.uid ? user.uid : 'cargando',\r\n      orden: Date.now(),\r\n    }\r\n\r\n    addDoc(tarjetas, nombreTarjeta)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (historial.length == 0) {\r\n      return\r\n    } else {\r\n      subirDatos()\r\n    }\r\n\r\n    if (ciudades.length == 0) {\r\n      return\r\n    } else {\r\n      subirTarjeta()\r\n    }\r\n  }, [historial, ciudades])\r\n\r\n  return (\r\n    <Router>\r\n      <div>\r\n        <Routes>\r\n          {user && (\r\n            <>\r\n              <Route\r\n                path=\"/history\"\r\n                element={\r\n                  <HistoryScreen\r\n                    desloguear={desloguear}\r\n                    historial={historial}\r\n                  />\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/search\"\r\n                exact\r\n                element={\r\n                  <SearchScreen\r\n                    desloguear={desloguear}\r\n                    ciudades={ciudades}\r\n                    setCiudades={setCiudades}\r\n                    setHistorial={setHistorial}\r\n                    subirDatos={subirDatos}\r\n                  />\r\n                }\r\n              />\r\n            </>\r\n          )}\r\n          <Route\r\n            path=\"/\"\r\n            element={\r\n              user ? (\r\n                <SearchScreen\r\n                  desloguear={desloguear}\r\n                  ciudades={ciudades}\r\n                  setHistorial={setHistorial}\r\n                  setCiudades={setCiudades}\r\n                  subirDatos={subirDatos}\r\n                />\r\n              ) : (\r\n                <LoginScreen loguear={loguear} />\r\n              )\r\n            }\r\n            exact\r\n          />\r\n        </Routes>\r\n      </div>\r\n    </Router>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { WeatherApp } from './WeatherApp'\r\nimport './scss/main.scss'\r\nimport './firebase/config'\r\nimport { ContextProvider } from './context/authContext'\r\n\r\nReactDOM.render(\r\n  <ContextProvider>\r\n    <WeatherApp />\r\n  </ContextProvider>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}